{% extends "base.html" %}

{% block title %}Edit Device - NetScan{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5>Edit Device</h5>
            </div>
            <div class="card-body">
                <form method="POST" enctype="multipart/form-data">
                    {{ csrf_token() }}
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="hostname" class="form-label">Hostname</label>
                                <input type="text" class="form-control" id="hostname" name="hostname" 
                                       value="{{ device.hostname or '' }}">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="icon" class="form-label">Icon</label>
                                <select class="form-control" id="icon" name="icon">
                                    <option value="laptop" {% if device.icon == 'laptop' %}selected{% endif %}>ğŸ’» Laptop</option>
                                    <option value="mobile" {% if device.icon == 'mobile' %}selected{% endif %}>ğŸ“± Mobile</option>
                                    <option value="desktop" {% if device.icon == 'desktop' %}selected{% endif %}>ğŸ–¥ï¸ Desktop</option>
                                    <option value="tablet" {% if device.icon == 'tablet' %}selected{% endif %}>ğŸ“± Tablet</option>
                                    <option value="tv" {% if device.icon == 'tv' %}selected{% endif %}>ğŸ“º TV</option>
                                    <option value="router" {% if device.icon == 'router' %}selected{% endif %}>ğŸ“¡ Router</option>
                                    <option value="printer" {% if device.icon == 'printer' %}selected{% endif %}>ğŸ–¨ï¸ Printer</option>
                                    <option value="camera" {% if device.icon == 'camera' %}selected{% endif %}>ğŸ“· Camera</option>
                                    <option value="speaker" {% if device.icon == 'speaker' %}selected{% endif %}>ğŸ”Š Speaker</option>
                                    <option value="device" {% if device.icon == 'device' or not device.icon %}selected{% endif %}>ğŸ“± Device</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="brand" class="form-label">Brand</label>
                                <input type="text" class="form-control" id="brand" name="brand" 
                                       value="{{ device.brand or '' }}">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="model" class="form-label">Model</label>
                                <input type="text" class="form-control" id="model" name="model" 
                                       value="{{ device.model or '' }}">
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="category" class="form-label">Category</label>
                                <select class="form-control" id="category" name="category">
                                    <option value="">Select Category</option>
                                    <option value="Phone" {% if device.category == 'Phone' %}selected{% endif %}>ğŸ“± Phone</option>
                                    <option value="Computer" {% if device.category == 'Computer' %}selected{% endif %}>ğŸ’» Computer</option>
                                    <option value="Network" {% if device.category == 'Network' %}selected{% endif %}>ğŸ“¡ Network</option>
                                    <option value="Media" {% if device.category == 'Media' %}selected{% endif %}>ğŸ“º Media</option>
                                    <option value="Security" {% if device.category == 'Security' %}selected{% endif %}>ğŸ”’ Security</option>
                                    <option value="Camera" {% if device.category == 'Camera' %}selected{% endif %}>ğŸ“· Camera</option>
                                    <option value="Smarthome" {% if device.category == 'Smarthome' %}selected{% endif %}>ğŸ  Smart Home</option>
                                    <option value="Gaming" {% if device.category == 'Gaming' %}selected{% endif %}>ğŸ® Gaming</option>
                                    <option value="Storage" {% if device.category == 'Storage' %}selected{% endif %}>ğŸ’¾ Storage</option>
                                    <option value="IoT" {% if device.category == 'IoT' %}selected{% endif %}>ğŸŒ IoT</option>
                                    <option value="Server" {% if device.category == 'Server' %}selected{% endif %}>ğŸ–¥ï¸ Server</option>
                                    <option value="Printer" {% if device.category == 'Printer' %}selected{% endif %}>ğŸ–¨ï¸ Printer</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="person_id" class="form-label">Owner</label>
                        <select class="form-control" id="person_id" name="person_id">
                            <option value="">No owner</option>
                            {% for person in people %}
                                <option value="{{ person.id }}" 
                                        {% if device.person_id == person.id %}selected{% endif %}>
                                    {{ person.name }}
                                </option>
                            {% endfor %}
                        </select>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="device_image" class="form-label">Device Image</label>
                        <input type="file" class="form-control" id="device_image" name="device_image" accept="image/png,image/jpeg,image/jpg">
                        <div class="form-text">Upload a PNG/JPG image to represent this device</div>
                        {% if device.image_path %}
                            <div class="mt-2">
                                <img src="{{ url_for('uploaded_file', filename=device.image_path) }}" 
                                     alt="Device Image" class="img-thumbnail" style="max-width: 100px;">
                                <small class="text-muted d-block">Current image</small>
                            </div>
                        {% endif %}
                    </div>
                    
                    <hr>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">IP Address</label>
                                <input type="text" class="form-control" value="{{ device.ip_address }}" readonly>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">MAC Address</label>
                                <input type="text" class="form-control" value="{{ device.mac_address }}" readonly>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-between">
                        <a href="{{ url_for('device_detail', device_id=device.id) }}" class="btn btn-secondary">
                            Cancel
                        </a>
                        <button type="submit" class="btn btn-primary">
                            Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}